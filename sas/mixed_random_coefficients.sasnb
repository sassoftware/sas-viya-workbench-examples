[{"kind":1,"language":"markdown","value":"PROC MIXED - Random Coefficients  \n\nThis example is adapted from [Random Coefficients](https://documentation.sas.com/?cdcId=pgmsascdc&cdcVersion=default&docsetId=statug&docsetTarget=statug_mixed_examples05.htm)\n\nThe data represent a random coefficients example from a pharmaceutical stability data simulation performed by Obenchain (1990).\n","outputs":[]},{"kind":2,"language":"sas","value":"data rc;\n   input Batch Month @@;\n   Monthc = Month;\n   do i = 1 to 6;\n      input Y @@;\n      output;\n   end;\n   datalines;\n 1   0  101.2 103.3 103.3 102.1 104.4 102.4\n 1   1   98.8  99.4  99.7  99.5    .     .\n 1   3   98.4  99.0  97.3  99.8    .     .\n 1   6  101.5 100.2 101.7 102.7    .     .\n 1   9   96.3  97.2  97.2  96.3    .     .\n 1  12   97.3  97.9  96.8  97.7  97.7  96.7\n 2   0  102.6 102.7 102.4 102.1 102.9 102.6\n 2   1   99.1  99.0  99.9 100.6    .     .\n 2   3  105.7 103.3 103.4 104.0    .     .\n 2   6  101.3 101.5 100.9 101.4    .     .\n 2   9   94.1  96.5  97.2 95.6     .     .\n 2  12   93.1  92.8  95.4 92.2   92.2  93.0\n 3   0  105.1 103.9 106.1 104.1 103.7 104.6\n 3   1  102.2 102.0 100.8  99.8    .     .\n 3   3  101.2 101.8 100.8 102.6    .     .\n 3   6  101.1 102.0 100.1 100.2    .     .\n 3   9  100.9  99.5 102.2 100.8    .     .\n 3  12   97.8  98.3  96.9  98.4  96.9  96.5\n;\n\nrun;","outputs":[]},{"kind":2,"language":"sas","value":"*Creation of population reference line;\ndata pop;\n   input batch month;\n   datalines;\n   0 0\n   0 1\n   0 3\n   0 6\n   0 9\n   0 12\n   ;\nrun;\n","outputs":[]},{"kind":2,"language":"sas","value":"*Combine the original data to the population reference;\ndata plot;\n   set pop rc;\nrun;\n","outputs":[]},{"kind":2,"language":"sas","value":"*Mixed model with random coefficient on month;\nproc mixed data=plot;\n   class Batch;\n   model Y = Month / ddfm=kr2 s outp=pred;\n   random Int Month / type=un sub=Batch s;\nrun;\n","outputs":[]},{"kind":2,"language":"sas","value":"*Generated output data set containing predictions;\nproc print data=pred;\nrun;\n","outputs":[]},{"kind":2,"language":"sas","value":"*Create format for population reference;\nproc format;\n   value batch\n   0 = 'Population';\nrun;\n\n","outputs":[]},{"kind":2,"language":"sas","value":"*Generate multiple line graph of random slope about the population reference;\nproc sgplot data=pred;\n   series y=pred x=month / group=batch;\n   format batch batch.;\nrun;\n","outputs":[]},{"kind":2,"language":"sas","value":"*Incorrectly treating month as a fixed effect across batches;\nproc mixed data=plot;\n   class batch;\n   model y = month batch / ddfm=kr2 s outp=predno;\nrun;\n","outputs":[]},{"kind":2,"language":"sas","value":"*Generate slopes of month as fixed effect;\nproc sgplot data=predno;\n   where batch gt 0;\n   series y=pred x=month / group=batch;\nrun;\n","outputs":[]}]